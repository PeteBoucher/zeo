<!DOCTYPE html>
<html>
<head>
  <title>Zeo</title>
  <link href="/css/style.css" rel=stylesheet>
</head>
<body>
  <header class=header>
    <div class=header-left>
      <a href="https://zeovr.io" class=header-logo-anchor><img width=32 height=51 src="/img/logo.png" class=header-icon>zeo vr</a>
    </div>
    <div class=demographics>
      <navbar>
        <a href="/" class=green>Try it</a>
        <a href="/docs" class=green>Documentation</a>
        <a href="/modules" class="green selected">Modules</a>
        <a href="/servers" class=green>Servers</a>
      </navbar>
    </div>
    <div class=header-right>
      <a href="https://github.com/modulesio/zeo" class=header-github-anchor>
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="24" height="24" viewBox="0 0 24 24"><path d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z"/></svg>
        <span>Github</span>
      </a>
    </div>
  </header>
  <div class=content>
    <div class=load-status>Loading...</div>
    <div class=load-placeholder>No modules :(</div>
    <div class=modules-body id=modules-body></div>
    <footer class=footer>
      <div class="footer-wrap full">
        <div class=footer-left><a href="/" class="link soft">Home</a> | <a href="https://github.com/modulesio/zeo" class="link soft">Github</a> | <a href="mailto:hello@zeovr.io" class="link soft">Contact</a></div>
        <div class=footer-right>&copy; 2017 <a href="mailto:a@zeovr.io">Zeo VR</a></div>
      </div>
    </footer>
  </div>
  <script src="/js/lib/creaturejs.js"></script>
  <script>
const $ = s => document.querySelectorAll(s);
const $$ = (e, s) => e.querySelectorAll(s);

const loadStatus = $('.load-status')[0];
const loadPlaceholder = $('.load-placeholder')[0];
const modulesBody = $('#modules-body')[0];

const _makeModuleElement = module => {
  const {name} = module;

  const div = document.createElement('div');
  div.innerHTML = `<div class=module>
    <img class=module-image />
    <div class=module-content>
      <div class=module-header>
        <div class=module-header-wrap>
          <a href="/modules/${module.name}" class=name>${module.displayName}</a>
          <div class=version>${module.version}</div>
        </div>
      </div>
      <div class=description>${module.description}</div>
    </div>
  </div>`;
  const moduleElement = div.childNodes[0];

  setTimeout(() => {
    $$(moduleElement, '.module-image')[0].src = creaturejs.makeStaticCreature('module:' + name);
  });

  return moduleElement;
};
const _update = () => {
  loadStatus.style.display = 'flex';
  loadPlaceholder.style.display = 'none';

  while (modulesBody.hasChildNodes()) {
    modulesBody.removeChild(modulesBody.lastChild);
  }
  modulesBody.style.display = 'none';

  fetch('/modules/modules.json')
    .then(res =>
      res.json()
        .then(modules => {
          loadStatus.style.display = 'none';
          loadPlaceholder.style.display = modules.length === 0 ? 'flex' : 'none';

          for (let i = 0; i < modules.length; i++) {
            const module = modules[i];
            const moduleElement = _makeModuleElement(module);
            modulesBody.appendChild(moduleElement);
          }
          modulesBody.style.display = modules.length > 0 ? 'flex' : 'none';
        })
    );
};
_update();
  </script>
</body>
</html/>
